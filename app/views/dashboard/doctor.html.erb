<h1>Doctor Dashboard</h1>

<p>Welcome, <%= @user.username %></p>
<hr>

<h2>Your Clinic</h2>
<% if @user.clinic %>
  <p>You currently work at <%= @user.clinic.name %>, with a salary of $<%= @user.salary %></p>
  <%= form_with url: doctor_path(@user, clinic_id: @user.clinic.id), method: :patch do |f| %>
    <label for="salary">Request new salary: </label>
    <input type="number" name="salary" id="salary" required>
    <input type="submit" value="Request">
  <% end %>
<% else %>
  <p>You do not currently work at any clinic.</p>
<% end %>
<hr>

<h2>Upcoming Appointments</h2>
<% if @appointments.any? %>
  <ul>
    <% @appointments.each do |appointment| %>
      <li>
        <strong>Appointment at <%= appointment.date %></strong><br>
        <%= appointment.time_slot.starts_at.strftime("%I:%M %p") %> â€“
        <%= appointment.time_slot.ends_at.strftime("%I:%M %p") %><br>
        with <%= appointment.patient.username %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>You have no upcoming appointments.</p>
<% end %>
